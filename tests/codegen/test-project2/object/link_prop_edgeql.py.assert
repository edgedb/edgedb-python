# AUTOGENERATED FROM 'object/link_prop.edgeql' WITH:
#     $ gel-py --target blocking --no-skip-pydantic-validation


from __future__ import annotations
import dataclasses
import datetime
import gel
import typing
import uuid


@dataclasses.dataclass
class LinkPropResult:
    id: uuid.UUID
    name: str
    friends: list[LinkPropResultFriendsItem]


@dataclasses.dataclass
class LinkPropResultFriendsItem:
    id: uuid.UUID
    name: str
    created_at: typing.Optional[datetime.datetime]

    @typing.overload
    def __getitem__(self, key: typing.Literal["@created_at"]) -> typing.Optional[datetime.datetime]:
        ...

    @typing.overload
    def __getitem__(self, key: typing.Literal["@strength"]) -> typing.Optional[float]:
        ...

    def __getitem__(self, key: str) -> typing.Any:
        raise NotImplementedError


def link_prop(
    executor: gel.Executor,
) -> list[LinkPropResult]:
    return executor.query(
        """\
        create type Person {
            create required property name -> str;
            create property created_at -> datetime;
            create multi link friends -> Person {
                create property strength -> float64;
                create property created_at -> datetime;
            }
        };

        select Person {
            name,
            friends: {
                name,
                @created_at,
                created_at,
                @strength,
            }
        };\
        """,
    )
